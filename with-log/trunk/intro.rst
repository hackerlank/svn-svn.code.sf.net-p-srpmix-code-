========================================================================

========================================================================

1. はじめに
************************************************************************

顧客より製品ソフトウェアのトラブルについて問合せを受けると、サポートエ
ンジニアはまず顧客のシステムで何が起っているかの把握に努めます。再現で
きるかどうか、深刻な不具合であるか仕様であるか、ワークアラウンドがある
か、どうやって修正するかといった調査は、全て何が起っているかをある程度
把握した後の作業になります。

多くの場合、顧客からの情報は十分でないため、問合せの文面を見ても何が起っ
ているのかわかりません。従って、より詳細な情報(ログ)を得る方法の提示が
一時回答となります。ログさえ手に入れば、それを出力したソースコードの近
辺を読解してシステムが何を実行しようとしていたか掴めます。

ソースコードを持ち出してこなくても、ログの内容をキーにして事例ベース
を検索できます。ログだけ読めばトラブルの原因がわかってしまうことすら
あります。実際に筆者は、使ったことはおろか、用途すら知らないソフトウ
ェアについての問合せに対して、ログの読解だけから作成した回答だけで
トラブルを解決したことがあります。

これだけ調査が容易になるなら、なぜ顧客は問合せに詳細なログを含めないの
か不思議に思うかもしれません。これには理由があります。ログの取得方法が
あまり知られていないためです。そのためサポートエンジニア自身、ログを得
る方法を時間をかけてソースコードから調べて一時回答を作成することがあり
ます。

そこで、ソフトウェア毎にログの取得方法など(ログレシピ)をまとめたカタロ
グを用意しておくことを思いつきました。問合せの対象となっているソフトウェ
アのレシピがあれば、迅速に一時回答を作成できます。また顧客にカタログを
渡しておけば、問合せ自体にログを含めてもらえます。レシピの作成には手間
かかかりますが、誰かが1度作成すれば、将来に渡って使えます。また同僚や顧
客とも共有できます。

問題は誰がログレシピを書くのかということです。サポート対象となる全ての
ソフトウェアについて十分な内容のレシピを作成し、ソフトウェアのバージョ
ンアップ毎に更新できれば良いのですが、現実的ではありません。そこでカタ
ログの利用条件をGNU Free Documentation Licenseとして、利用者が
必要に応じてレシピの加筆、修正できる形で配布することにしました。

レシピの掲載を始める前に3つの章で、レシピを利用、加筆、修正するための
前提となり事項を説明します。

従来ソフトウェアの使い方や設定の仕方と比較するとログの使い方や取得方法
はあまり重要視されていませんでした。読者、筆者で共通の語句がないので、
広く役に立つ形でレシピを記述するのが困難です。 
`2. ログにまつわる概念`_ では、筆者がいくつかレシピを書いた経験をもと
に語句を導入します。既存の語句の意味との混同を避けるためにわざと独特の
語句を選んでいるので、是非目を通して下さい。

レシピを使ってログを得たとして、それをどのように活用すれば良いでしょう。
ログから対応するソースコードを選定し読むという活用することを想定して、
ノウハウを `3. ソースコード行への対応付け`_ にて紹介します。レシピを利
用しようとは思っているが、ソースコードを読んだ経験があまりないという人
は是非読んで下さい。

料理のレシピであれば、「材料」、「調理手順」、「盛り付け例」などの項目が
あります。利用者もそういった項目を期待します。ログレシピにあっても期待
される項目があるのではないかと考えました。 `4. レシピのテンプレート`_
にてレシピに記載すべき項目について説明します。レシピの加筆、更新する前
に是非読んで下さい。

レシピは2系統あります。ログAPIに関するものとソフトウェアに関するものです。

ソフトウェアは規模が大きくなると独自のログ機構を持つ
傾向にあります。しかし汎用のログライブラリを使っているソフトウェアもあり
ます。汎用のログライブラリを使っているソフトウェアそれぞれについてより
詳細なログを得る方法を説明するよりも、共通部分であるログライブラリにつ
いて解説を行なった方が手間がかかりません。そこで、複数のソフトウェアで
使われているログライブラリについては、ソフトウェアのカタログとは別にロ
グAPIのカタログとしてまとめることにしました。

